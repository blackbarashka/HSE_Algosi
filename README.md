# –û—Ç—á—ë—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç—É "course-project-blackbarashka"
### 1. –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
–ü—Ä–æ–µ–∫—Ç ‚Äî —É—á–µ–±–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ FastAPI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–º –∫–Ω–∏–≥ (CRUD + –ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤). –í—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –∏ security-–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏: —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ RFC 7807, –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (rate limiting), –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –º–æ–¥–µ–ª–∏ Pydantic, —Ç–µ—Å—Ç—ã —Å pytest –∏ –±–∞–∑–æ–≤—ã–µ ADR'—ã (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è) –≤ adr. 

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ñ–∞–π–ª—ã –∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
- `main.py` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞; —Å–æ–∑–¥–∞—ë—Ç `FastAPI` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç `ErrorHandlerMiddleware`, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–æ—É—Ç–µ—Ä `books` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä—É—á–∫–∏ `/health`, `/items` (–¥–µ–º–æ).

- `books.py` ‚Äî API –¥–ª—è books —Å —Ä–æ—É—Ç–µ—Ä–æ–º `prefix="/api/v1/books"`. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã: –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ id, —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —á–∞—Å—Ç–∏—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (PATCH .../status) –∏ —É–¥–∞–ª–µ–Ω–∏–µ. –í–∫–ª—é—á–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤ (validate_status_transition) ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (tampering).

- `book.py` ‚Äî Pydantic-—Å—Ö–µ–º—ã: `BookCreate`, `BookUpdate`, `BookResponse`, `BookStatusUpdate`. –ü–æ–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ –¥–ª–∏–Ω–µ (title, author, description).

- `book.py` ‚Äî –¥–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å `Book` –∏ `BookStatus` (Enum).

- `error_handler.py` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ RFC 7807 (Problem Details). –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç correlation_id –∏ –ª–æ–≥–∏—Ä—É–µ—Ç –∞—É–¥–∏—Ç—ã (app.audit).

- `rate_limit.py` ‚Äî in-memory rate limiter: –ø–æ IP, –æ–∫–Ω–æ 60s, `POST /api/v1/books` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 10/–º–∏–Ω, –≥–ª–æ–±–∞–ª—å–Ω—ã–π 100/–º–∏–Ω. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 429 —Å Retry-After.

- `request_size.py` ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1_000_000 –±–∞–π—Ç) ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 413 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏.

- `adr` ‚Äî ADR'—ã:

     - `ADR-001-rfc7807-error-handling.md` ‚Äî –ø—Ä–∏–Ω—è—Ç–æ: –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ RFC 7807, correlation_id, –∞—É–¥–∏—Ç—ã.
    - `ADR-002-input-validation-security.md` ‚Äî –ø—Ä–∏–Ω—è—Ç–æ: –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è + –ª–∏–º–∏—Ç payload + sanitization.
    - `ADR-003-rate-limiting-protection.md` ‚Äî –ø—Ä–∏–Ω—è—Ç–æ: in-memory –ª–∏–º–∏—Ç–µ—Ä, –ø–ª–∞–Ω –Ω–∞ Redis –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.
 - –¢–µ—Å—Ç—ã –≤ `tests`:

    - `test_books.py` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ/—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è API –∫–Ω–∏–≥ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å-–ø–µ—Ä–µ—Ö–æ–¥—ã).
    - `test_rate_limiting.py` ‚Äî —Ç–µ—Å—Ç—ã –ø–æ–≤–µ–¥–µ–Ω–∏—è rate limiting.
    - `test_pr_db.py` ‚Äî —Ç–µ—Å—Ç—ã CRUD —á–µ—Ä–µ–∑ SQLAlchemy –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–ª–æ—è —Ö—Ä–∞–Ω–µ–Ω–∏—è).
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

    - `requirements.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç fastapi, uvicorn, pytest, httpx, SQLAlchemy –∏ –ø—Ä.
    - `pyproject.toml` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥–∏ `ruff`, `isort`, `pytest` –æ–ø—Ü–∏–∏.
- Infra / DevOps –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:

    - `Dockerfile`, `compose.yaml` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∫–æ—Ä–Ω–µ (–µ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏).

### 3. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (NFR) –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ
–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö NFR –∏ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–µ—Ç—Ä–∏–∫–∞/–ü–æ—Ä–æ–≥ | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----|----------|-----------|---------------|----------|-----------|-----------|
| NFR-001 | –ó–∞—â–∏—Ç–∞ –æ—Ç brute-force –ª–æ–≥–∏–Ω–æ–≤ | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö | ‚â•5 –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –ª–æ–≥–∏–Ω–æ–≤ –∑–∞ 5 –º–∏–Ω ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 10 –º–∏–Ω | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Ç–µ—Å—Ç—ã | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | High |
| NFR-002 | –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | –û—Ç–≤–µ—Ç—ã –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏ (–ø–∞—Ä–æ–ª—å/–ª–æ–≥–∏–Ω –Ω–µ–≤–µ—Ä–µ–Ω) | 100% —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | High |

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–µ—Ç—Ä–∏–∫–∞/–ü–æ—Ä–æ–≥ | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----|----------|-----------|---------------|----------|-----------|-----------|
| NFR-003 | Rate limiting –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–Ω–∏–≥ | POST /api/v1/books ‚â§10 –ø–æ–ø—ã—Ç–æ–∫/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–º–∏–Ω | –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | Books API | Medium |
| NFR-004 | –ó–∞—â–∏—Ç–∞ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API | ‚â§100 RPS –Ω–∞ IP; –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ ‚Üí 429 + Retry-After | WAF, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | –í–µ—Å—å API | High |

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –û—à–∏–±–∫–∏ –∏ –æ—Ç–≤–µ—Ç—ã

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–µ—Ç—Ä–∏–∫–∞/–ü–æ—Ä–æ–≥ | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----|----------|-----------|---------------|----------|-----------|-----------|
| NFR-005 | –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | –¢–µ–ª–∞ –æ—à–∏–±–æ–∫ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É | 100% —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫; –Ω–µ—Ç stack trace | –¢–µ—Å—Ç—ã, —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã | High |
| NFR-006 | –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è –≤ –ª–æ–≥–∞—Ö | 100% email/–∏–º–µ–Ω –≤ –ª–æ–≥–∞—Ö –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è | –ê—É–¥–∏—Ç –ª–æ–≥–æ–≤ | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | High |

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –°–µ–∫—Ä–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–µ—Ç—Ä–∏–∫–∞/–ü–æ—Ä–æ–≥ | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----|----------|-----------|---------------|----------|-----------|-----------|
| NFR-007 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ | –°–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤ –∫–æ–¥–µ | 0 —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ/–ª–æ–≥–∞—Ö; —Ä–æ—Ç–∞—Ü–∏—è ‚â§90 –¥–Ω–µ–π | Secret scanning | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | High |
| NFR-008 | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö | 0 Critical/High —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö | SAST —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | High |

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –õ–æ–≥–∏/–∞—É–¥–∏—Ç/—Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–µ—Ç—Ä–∏–∫–∞/–ü–æ—Ä–æ–≥ | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----|----------|-----------|---------------|----------|-----------|-----------|
| NFR-009 | –ê—É–¥–∏—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–Ω–∏–≥–∞–º–∏ | ‚â•95% CRUD –æ–ø–µ—Ä–∞—Ü–∏–π —Å correlation_id | –ê—É–¥–∏—Ç –ª–æ–≥–æ–≤ | –í–µ—Å—å —Å–µ—Ä–≤–∏—Å | Medium |
| NFR-010 | –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ —Ä–µ—Ç–µ–Ω—à–Ω | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö | –†–µ—Ç–µ–Ω—à–Ω –ª–æ–≥–æ–≤ ‚â§30 –¥–Ω–µ–π; –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ü–î–Ω | –ü–æ–ª–∏—Ç–∏–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | Medium |

#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è NFR –≤ –ø—Ä–æ–µ–∫—Ç–µ

- **NFR-001**: –ó–∞—â–∏—Ç–∞ –æ—Ç brute-force –ª–æ–≥–∏–Ω–æ–≤ - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `RateLimitMiddleware`
- **NFR-002**: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ - –ï—Å—Ç—å –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫, –Ω–æ –Ω—É–∂–Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **NFR-003**: Rate limiting –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥ - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `RateLimitMiddleware`
- **NFR-004**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–∞—Å—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ rate limiting
- **NFR-005**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `ErrorHandlerMiddleware` + –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç RFC 7807 + —Ç–µ—Å—Ç—ã `test_error_handling.py`
- **NFR-006**: –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö - –ï—Å—Ç—å –±–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- **NFR-009**: –ê—É–¥–∏—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `correlation_id` + middleware –ø–∏—à–µ—Ç –≤ app.audit

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è–º –æ—Ç—á–µ—Ç–∞:

- –ú–æ–¥–µ–ª—å —É–≥—Ä–æ–∑/STRIDE: –ø—Ä–æ–µ–∫—Ç —è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç STRIDE-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã (tampering ‚Äî –∑–∞—â–∏—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤; spoofing/auth ‚Äî –µ—Å—Ç—å –ø–ª–∞–Ω—ã –Ω–∞ OIDC/JWT –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ NFR; info disclosure ‚Äî RFC7807 –∏ —Å–æ–∫—Ä—ã—Ç–∏–µ —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–æ–≤; DoS ‚Äî rate limiting + size limit).
- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —É–≥—Ä–æ–∑: correlation_id –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç -> —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–µ–∂–¥—É –æ—Ç–≤–µ—Ç–æ–º –∏ –ª–æ–≥–∞–º–∏.

## 4. –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≥—Ä–æ–∑:

### Data Flow Diagram (DFD)
–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—É—é DFD-–¥–∏–∞–≥—Ä–∞–º–º—É —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –¥–æ–≤–µ—Ä–∏—è, –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö:

<img width="531" height="621" alt="image" src="https://github.com/user-attachments/assets/eb7db495-5eb2-4c3b-b3bb-cb7c285058bc" />


### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≥—Ä–∞–Ω–∏—Ü—ã –¥–æ–≤–µ—Ä–∏—è

**–í–Ω–µ—à–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:**
- Web Client, API Consumer, Attacker

**–ü—Ä–æ—Ü–µ—Å—Å—ã:**
- API Gateway, FastAPI Application, Validation Service, Business Logic

**–•—Ä–∞–Ω–∏–ª–∏—â–∞:**
- In-Memory Database, Audit Logs

**–ì—Ä–∞–Ω–∏—Ü—ã –¥–æ–≤–µ—Ä–∏—è:**
- **Edge** - –≤–Ω–µ—à–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ (API Gateway)
- **Core** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Data** - –≥—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
| –ü–æ—Ç–æ–∫ | –û–ø–∏—Å–∞–Ω–∏–µ | –£–≥—Ä–æ–∑—ã STRIDE | –ö–æ–Ω—Ç—Ä–æ–ª—å |
|-------|----------|---------------|----------|
| F1, F11, F13 | –í–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API Gateway | S, T, I, D | Rate limiting, Request validation |
| F3, F4 | –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥–∏ | T, I | Pydantic —Å—Ö–µ–º—ã, sanitization |
| F5, F6 | –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö | T, I, R | CRUD –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| F10 | –ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π | R, T | Append-only –ª–æ–≥–∏, correlation_id |

### –ê–Ω–∞–ª–∏–∑ –≥—Ä–∞–Ω–∏—Ü –¥–æ–≤–µ—Ä–∏—è
- **Edge boundary**: –ó–∞—â–∏—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ RateLimitMiddleware –∏ RequestSizeLimitMiddleware
- **Core boundary**: –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç tampering —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç—É—Å-–ø–µ—Ä–µ—Ö–æ–¥—ã
- **Data boundary**: –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º –∏ –∞—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π

DFD –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º 3 –≥—Ä–∞–Ω–∏—Ü –¥–æ–≤–µ—Ä–∏—è –∏ 14 –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏—é "3-4 DFD —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –¥–æ–≤–µ—Ä–∏—è".

### –°–ø–∏—Å–æ–∫ STRIDE:

| –ü–æ—Ç–æ–∫/–≠–ª–µ–º–µ–Ω—Ç | –£–≥—Ä–æ–∑–∞ (S/T/R/I/D/E) | –û–ø–∏—Å–∞–Ω–∏–µ —É–≥—Ä–æ–∑—ã | –ö–æ–Ω—Ç—Ä–æ–ª—å | –°—Å—ã–ª–∫–∞ –Ω–∞ NFR | –ü—Ä–æ–≤–µ—Ä–∫–∞/–ê—Ä—Ç–µ—Ñ–∞–∫—Ç |
|---|---|---|---|---|---|
| F1, F11, F13 | **S**poofing | –ü–æ–¥–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | Rate limiting + IP –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ 100+ RPS | NFR-004 | tests/test_nfr_security.py |
| F1, F11, F13 | **T**ampering | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥ –≤ HTTP –∑–∞–ø—Ä–æ—Å–∞—Ö | Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º BookCreate/BookUpdate | NFR-005 | app/schemas/book.py |
| F1, F11, F13 | **I**nformation Disclosure | –£—Ç–µ—á–∫–∞ stack trace –≤ –æ—à–∏–±–∫–∞—Ö API | –ö–∞—Å—Ç–æ–º–Ω—ã–µ exception handlers | NFR-005 | tests/test_errors.py |
| F1, F11, F13 | **D**enial of Service | Flood –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥ | Rate limiting 10 POST/–º–∏–Ω –Ω–∞ endpoint | NFR-003 | tests/test_nfr_security.py |
| F3, F4 | **T**ampering | –ò–Ω—ä–µ–∫—Ü–∏—è —á–µ—Ä–µ–∑ –ø–æ–ª—è title/author | Sanitization —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–æ–ª–µ–π, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã | NFR-005 | app/models/book.py |
| F5, F6 | **I**nformation Disclosure | –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫–Ω–∏–≥–∞–º –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π | –ü–∞–≥–∏–Ω–∞—Ü–∏—è GET –∑–∞–ø—Ä–æ—Å–æ–≤, –ª–∏–º–∏—Ç—ã –≤—ã–±–æ—Ä–∫–∏ | NFR-006 | GET /api/v1/books |
| F5 | **T**ampering | –ù–µ–≤–∞–ª–∏–¥–∏—Ä—É–µ–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∫–Ω–∏–≥–∏ | –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤ (to_read‚Üíin_progress‚Üícompleted) | NFR-005 | PATCH /api/v1/books/{id}/status |
| F10 | **R**epudiation | –û—Ç–∫–∞–∑ –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–Ω–∏–≥–∞–º–∏ | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å correlation_id, timestamp | NFR-009 | app/storage/database.py |
| F1, F11, F13 | **D**enial of Service | –ê—Ç–∞–∫–∏ –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API —á–µ—Ä–µ–∑ –±–æ–ª—å—à–∏–µ payloads | –õ–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ JSON (1MB) + timeout | NFR-004 | FastAPI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| F2, F8 | **T**ampering | –ü–æ–¥–º–µ–Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API –≤—ã–∑–æ–≤–æ–≤ | –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ | NFR-005 | Internal API checks |
| F5, F6 | **I**nformation Disclosure | –£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –¥–∞–º–ø–µ –ø–∞–º—è—Ç–∏ | –û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ graceful shutdown | NFR-006 | app/storage/database.py |
| F10 | **T**ampering | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–æ–≤ –∞—É–¥–∏—Ç–∞ | Append-only –ª–æ–≥–∏, —Ü–∏—Ñ—Ä–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ | NFR-009 | Audit log protection |
| –í—Å–µ –ø–æ—Ç–æ–∫–∏ | **I**nformation Disclosure | –£—Ç–µ—á–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö | –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ email/–∏–º–µ–Ω –≤ –ª–æ–≥–∞—Ö | NFR-006 | Logging configuration |
| F1, F11, F13 | **D**enial of Service | –ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–Ω–∏–≥ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏, –ª–∏–º–∏—Ç—ã | NFR-004 | Memory monitoring |
| FastAPI App | **E**levation of Privilege | –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ü–∏—è–º –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | –ë—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è RBAC | NFR-002 | (planned) |

##  –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### **Tampering**
- –ó–∞—â–∏—Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤ —á–µ—Ä–µ–∑ `validate_status_transition`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic-—Å—Ö–µ–º—ã

### **Repudiation**
- –°–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏—Ç–∞ —á–µ—Ä–µ–∑ `correlation_id`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `app.audit`

### **Denial of Service**
- `RateLimitMiddleware` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- `RequestSizeLimitMiddleware` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### **Information Disclosure**
- `ErrorHandlerMiddleware` —Å–∫—Ä—ã–≤–∞–µ—Ç stack trace –≤ –æ—à–∏–±–∫–∞—Ö
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ (RFC 7807)


## 5. –†–µ–µ—Å—Ç—Ä —Ä–∏—Å–∫–æ–≤ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

### –ú–∞—Ç—Ä–∏—Ü–∞ –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–æ–≤
**–§–æ—Ä–º—É–ª–∞:** Risk = Likelihood (1-5) √ó Impact (1-5)

| –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ | –î–∏–∞–ø–∞–∑–æ–Ω | –°—Ç—Ä–∞—Ç–µ–≥–∏—è |
|---------------|----------|-----------|
| üî¥ –í—ã—Å–æ–∫–∏–π | 12+ | –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ |
| üü° –°—Ä–µ–¥–Ω–∏–π | 8-11 | –ü–ª–∞–Ω–æ–≤–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ |
| üü¢ –ù–∏–∑–∫–∏–π | ‚â§7 | –ü—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ |

### –†–µ–µ—Å—Ç—Ä —Ä–∏—Å–∫–æ–≤
| RiskID | –û–ø–∏—Å–∞–Ω–∏–µ | –°–≤—è–∑—å (F/NFR) | L | I | Risk | –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –í–ª–∞–¥–µ–ª–µ—Ü | –°—Ä–æ–∫ | –ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–∫—Ä—ã—Ç–∏—è |
|---|---|---|---|---|---|---|---|---|---|
| R1 | DoS —á–µ—Ä–µ–∑ –º–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥ | F1, NFR-003 | 4 | 3 | 12 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | v1.0 | Rate limiting 10 POST/–º–∏–Ω |
| R2 | –ò–Ω—ä–µ–∫—Ü–∏—è —á–µ—Ä–µ–∑ –ø–æ–ª—è title/author | F3, NFR-005 | 3 | 4 | 12 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | v1.0 | –í–∞–ª–∏–¥–∞—Ü–∏—è + sanitization |
| R3 | –£—Ç–µ—á–∫–∞ stack trace –≤ –æ—à–∏–±–∫–∞—Ö API | F1, NFR-005 | 3 | 3 | 9 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | v1.0 | –ö–∞—Å—Ç–æ–º–Ω—ã–µ error handlers |
| R4 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting –Ω–∞ –≤—Å–µ endpoints | F13, NFR-004 | 4 | 3 | 12 | —Å–Ω–∏–∑–∏—Ç—å | DevOps | v1.0 | WAF + 100 RPS –ª–∏–º–∏—Ç |
| R5 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É–¥–∏—Ç–∞ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π | F10, NFR-009 | 2 | 2 | 4 | –ø—Ä–∏–Ω—è—Ç—å | Dev Team | v1.2 | –õ–æ–≥–∏ —Å correlation_id |
| R6 | –£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö –∫–Ω–∏–≥ –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ | F6, NFR-006 | 3 | 3 | 9 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | v1.1 | –ü–∞–≥–∏–Ω–∞—Ü–∏—è GET /books |
| R7 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ª–æ–≥–∞—Ö | F10, NFR-006 | 3 | 3 | 9 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | v1.1 | –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| R8 | DoS —á–µ—Ä–µ–∑ –±–æ–ª—å—à–∏–µ JSON payloads | F1, NFR-004 | 3 | 3 | 9 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | v1.0 | –õ–∏–º–∏—Ç 1MB –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã |
| R9 | –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö FastAPI | NFR-008 | 2 | 4 | 8 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | ongoing | SCA —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI |
| R10 | –°–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ/–∫–æ–Ω—Ñ–∏–≥–∞—Ö | NFR-007 | 2 | 5 | 10 | —Å–Ω–∏–∑–∏—Ç—å | DevOps | v1.0 | Secret scanning –≤ CI |
| R11 | –ù–∞—Ä—É—à–µ–Ω–∏–µ —Ä–µ—Ç–µ–Ω—à–Ω –ø–æ–ª–∏—Ç–∏–∫ –ª–æ–≥–æ–≤ | NFR-010 | 2 | 2 | 4 | –ø—Ä–∏–Ω—è—Ç—å | DevOps | v1.1 | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ |
| R12 | –ò—Å—á–µ—Ä–ø–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ in-memory DB | F5, NFR-004 | 3 | 4 | 12 | —Å–Ω–∏–∑–∏—Ç—å | Dev Team | v1.0 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ |

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –ø–æ —Ä–∏—Å–∫–∞–º
- **4 –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö —Ä–∏—Å–∫–∞** —Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è (R1, R2, R4, R12)
- **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ NFR** - –≤—Å–µ –Ω–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–≤—è–∑–∞–Ω—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ä–∏—Å–∫–∞–º–∏
- **–Ø—Å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∏—Å–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ä—ã –∫–æ–Ω—Ç—Ä–æ–ª—è

## 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–∫: `pytest`, `TestClient` (FastAPI). –ï—Å—Ç—å unit/integration —Ç–µ—Å—Ç—ã –≤ `tests`.
- –ï—Å—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (–ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤), –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API (—Å–æ–∑–¥–∞–Ω–∏–µ/–ø–æ–ª—É—á–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ) –∏ —Ç–µ—Å—Ç—ã rate limiting.
- `test_pr_db.py` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç CRUD —á–µ—Ä–µ–∑ SQLAlchemy.
- –í –±—É–¥—É—â–µ–º –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è middleware, —Ç–µ—Å—Ç—ã –Ω–∞ santization.

## 7. DevOps / CI / –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- `Dockerfile` –∏ `compose.yaml` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏. 

## 8. –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

### 1. –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```powershell
pip install -r requirements.txt
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (uvicorn):

```powershell
python -m uvicorn app.main:app --reload --port 8000
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:
```powershell
pytest -q
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è:

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≥—Ä–æ–∑

**NFR (10 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π):** - **–í–´–ü–û–õ–ù–ï–ù–û**‚úÖ

**DFD —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –¥–æ–≤–µ—Ä–∏—è:** - **–í–´–ü–û–õ–ù–ï–ù–û**‚úÖ
- –°–æ–∑–¥–∞–Ω–æ 3 –≥—Ä–∞–Ω–∏—Ü—ã –¥–æ–≤–µ—Ä–∏—è (Edge, Core, Data)
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 14 –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

**STRIDE-–∞–Ω–∞–ª–∏–∑:** - **–í–´–ü–û–õ–ù–ï–ù–û**‚úÖ
- –í—ã—è–≤–ª–µ–Ω–æ 12+ —É–≥—Ä–æ–∑ –ø–æ –≤—Å–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º STRIDE
- –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —É–≥—Ä–æ–∑
- –û—Ü–µ–Ω–µ–Ω–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã

**–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–µ—Ä:** - **–í–´–ü–û–õ–ù–ï–ù–û**‚úÖ
- –†–µ–µ—Å—Ç—Ä —Ä–∏—Å–∫–æ–≤ —Å —è–≤–Ω–æ–π —Å–≤—è–∑—å—é —É–≥—Ä–æ–∑ ‚Üí –º–µ—Ä—ã ‚Üí NFR
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∏—Å–∫–∞
- –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ (L√óI)

**–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è** - **–í–´–ü–û–õ–ù–ï–ù–û**‚úÖ

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã:**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (RFC 7807)
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (Pydantic + –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- Rate limiting –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å correlation_id
- –ó–∞—â–∏—Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤ (tampering protection)

### ‚úÖ DevOps –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- Unit-—Ç–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API
- –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (rate limiting, error handling)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ in-memory –ë–î –¥–ª—è CI

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:**
- Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
